<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rastreador de Criptomoedas</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="chatbotview.css">
</head>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rastreador de Criptomoedas</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="chatbotview.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>Rastreador de Criptomoedas</h1>
      <div class="controls">
        <select id="currency-select">
          <option value="BRL">BRL (R$)</option>
          <option value="USD">USD ($)</option>
          <option value="EUR">EUR (€)</option>
          <option value="GBP">GBP (£)</option>
        </select>
        <button id="refresh-btn">
          <i class="fas fa-sync-alt"></i> Atualizar
        </button>
      </div>
    </header>

    <div class="update-info">
      Última atualização: <span id="update-time">-</span>
    </div>

    <div id="crypto-container">
      <div class="loading">
        <i class="fas fa-spinner fa-spin"></i> Carregando dados...
      </div>
    </div>
  </div>

<!-- ********************
     * BOTÃO DO CHATBOT *
     ******************** -->
    <section class="sidebar-bot">
      <botton id="chatbot_btn">
        <i class="fa-sharp fa-solid fa-hand-point-up"></i> chatbot
        </botton>
    </section>
        
  <!-- Container do chat -->
  <section class="container">
    <section class="chat">
        <section class="chat__messages">
            <!-- <div class="message--self">Hello, Word!</div>
            <div class="message--other">
                <span class="message--sender"> Lusqueta </span>
                Hello, Word!</div> -->
        </section>

        <form class="chat__form">
            <input type="text" class="chat__input" placeholder="Digite sua mensagem" required>
            <button type="submit" class="chat__button">
                <span class="material-symbols-outlined">send</span>
            </button>
        </form>
    </section>

  <script src="script.js"></script>
  <script src="chatbot.js"></script>
</body>
</html>


<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Criptomoedas</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        select, button {
            padding: 10px 15px;
            border-radius: 5px;
            border: 1px solid #ddd;
            background-color: white;
            font-size: 14px;
            cursor: pointer;
        }
        
        button {
            background-color: #8B5CF6;
            color: white;
            border: none;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #7C3AED;
        }
        
        .chart-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            position: relative;
        }
        
        .loader {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            z-index: 10;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(139, 92, 246, 0.3);
            border-radius: 50%;
            border-top-color: #8B5CF6;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .info-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .info-card {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .info-card h3 {
            font-size: 14px;
            color: #64748B;
            margin-bottom: 8px;
        }
        
        .info-card p {
            font-size: 18px;
            font-weight: bold;
            color: #1E293B;
        }
        
        .positive {
            color: #22C55E !important;
        }
        
        .negative {
            color: #EF4444 !important;
        }
        
        .attribution {
            text-align: center;
            margin-top: 30px;
            font-size: 12px;
            color: #64748B;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Dashboard de Criptomoedas</h1>
        </div>
        
        <div class="controls">
            <select id="coinSelect">
                <option value="1">Bitcoin (BTC)</option>
                <option value="1027">Ethereum (ETH)</option>
                <option value="1839">Binance Coin (BNB)</option>
                <option value="5426">Solana (SOL)</option>
                <option value="52">XRP (XRP)</option>
                <option value="2010">Cardano (ADA)</option>
                <option value="74">Dogecoin (DOGE)</option>
            </select>
            
            <select id="timeframeSelect">
                <option value="1">1 Dia</option>
                <option value="7">7 Dias</option>
                <option value="30" selected>30 Dias</option>
                <option value="90">3 Meses</option>
            </select>
            
            <button id="updateButton">Atualizar Gráfico</button>
        </div>
        
        <div class="chart-container">
            <div class="loader" id="chartLoader">
                <div class="spinner"></div>
            </div>
            <canvas id="priceChart" height="400"></canvas>
        </div>
        
        <div class="info-cards">
            <div class="info-card">
                <h3>Preço Atual</h3>
                <p id="currentPrice">$0.00</p>
            </div>
            <div class="info-card">
                <h3>Market Cap</h3>
                <p id="marketCap">$0.00</p>
            </div>
            <div class="info-card">
                <h3>Volume 24h</h3>
                <p id="volume24h">$0.00</p>
            </div>
            <div class="info-card">
                <h3>Variação 24h</h3>
                <p id="change24h">0.00%</p>
            </div>
        </div>
        
        <div class="attribution">
            Dados fornecidos pela API CoinGecko. Este é um exemplo educacional.
        </div>
    </div>
    
    <script>
        // Estado da aplicação
        const state = {
            selectedCoin: '1', // Bitcoin
            timeframe: '30', // 30 dias
            priceChart: null
        };
        
        // Elementos DOM
        const elements = {
            coinSelect: document.getElementById('coinSelect'),
            timeframeSelect: document.getElementById('timeframeSelect'),
            updateButton: document.getElementById('updateButton'),
            chartLoader: document.getElementById('chartLoader'),
            currentPrice: document.getElementById('currentPrice'),
            marketCap: document.getElementById('marketCap'),
            volume24h: document.getElementById('volume24h'),
            change24h: document.getElementById('change24h')
        };
        
        // Inicializar o aplicativo
        function init() {
            // Configurar os event listeners
            setupEventListeners();
            
            // Inicializar o gráfico
            initChart();
            
            // Carregar dados iniciais
            fetchCryptoData();
        }
        
        // Configurar event listeners
        function setupEventListeners() {
            elements.coinSelect.addEventListener('change', (e) => {
                state.selectedCoin = e.target.value;
            });
            
            elements.timeframeSelect.addEventListener('change', (e) => {
                state.timeframe = e.target.value;
            });
            
            elements.updateButton.addEventListener('click', fetchCryptoData);
        }
        
        // Inicializar o gráfico
        function initChart() {
            const ctx = document.getElementById('priceChart').getContext('2d');
            
            state.priceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Preço USD',
                        data: [],
                        borderColor: '#8B5CF6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `$${context.parsed.y.toLocaleString('pt-BR', {
                                        minimumFractionDigits: 2,
                                        maximumFractionDigits: 2
                                    })}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString('pt-BR', {
                                        minimumFractionDigits: 2,
                                        maximumFractionDigits: 2
                                    });
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Formatar números para exibição
        function formatNumber(number, decimals = 2) {
            return number.toLocaleString('pt-BR', {
                minimumFractionDigits: decimals,
                maximumFractionDigits: decimals
            });
        }
        
        // Formatar valores grandes (como market cap)
        function formatLargeNumber(number) {
            if (number >= 1e12) {
                return (number / 1e12).toLocaleString('pt-BR', { 
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2 
                }) + ' T';
            } else if (number >= 1e9) {
                return (number / 1e9).toLocaleString('pt-BR', { 
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2 
                }) + ' B';
            } else if (number >= 1e6) {
                return (number / 1e6).toLocaleString('pt-BR', { 
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2 
                }) + ' M';
            } else {
                return number.toLocaleString('pt-BR');
            }
        }
        
        // Buscar dados de criptomoedas usando a API CoinGecko (alternativa gratuita)
        async function fetchCryptoData() {
            // Mostrar carregamento
            elements.chartLoader.style.display = 'flex';
            
            try {
                // Obter o ID da moeda selecionada
                const coinId = getCoinGeckoId(state.selectedCoin);
                
                // Buscar dados de preço histórico
                const days = state.timeframe;
                const historyResponse = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}/market_chart?vs_currency=usd&days=${days}`);
                const historyData = await historyResponse.json();
                
                // Buscar dados da moeda atual
                const coinResponse = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false`);
                const coinData = await coinResponse.json();
                
                // Atualizar o gráfico
                updateChart(historyData.prices);
                
                // Atualizar as informações da moeda
                updateCoinInfo(coinData);
                
            } catch (error) {
                console.error('Erro ao buscar dados:', error);
                alert('Erro ao buscar dados. Verifique o console para mais detalhes.');
            } finally {
                // Esconder carregamento
                elements.chartLoader.style.display = 'none';
            }
        }
        
        // Mapear IDs do CoinMarketCap para IDs do CoinGecko
        function getCoinGeckoId(cmcId) {
            const idMap = {
                '1': 'bitcoin',
                '1027': 'ethereum',
                '1839': 'binancecoin',
                '5426': 'solana',
                '52': 'ripple',
                '2010': 'cardano',
                '74': 'dogecoin'
            };
            
            return idMap[cmcId] || 'bitcoin';
        }
        
        // Atualizar o gráfico com novos dados
        function updateChart(priceData) {
            // Processar dados para o gráfico
            const labels = [];
            const prices = [];
            
            priceData.forEach(dataPoint => {
                const date = new Date(dataPoint[0]);
                const formattedDate = formatDate(date);
                labels.push(formattedDate);
                prices.push(dataPoint[1]);
            });
            
            // Atualizar dados do gráfico
            state.priceChart.data.labels = labels;
            state.priceChart.data.datasets[0].data = prices;
            
            // Atualizar o título do gráfico
            const coinName = elements.coinSelect.options[elements.coinSelect.selectedIndex].text;
            state.priceChart.data.datasets[0].label = `${coinName} - Preço USD`;
            
            // Atualizar o gráfico
            state.priceChart.update();
        }
        
        // Formatar data para o gráfico
        function formatDate(date) {
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            
            return `${day}/${month}`;
        }
        
        // Atualizar informações da moeda
        function updateCoinInfo(coinData) {
            const marketData = coinData.market_data;
            
            // Atualizar preço atual
            elements.currentPrice.textContent = `$${formatNumber(marketData.current_price.usd)}`;
            
            // Atualizar capitalização de mercado
            elements.marketCap.textContent = `$${formatLargeNumber(marketData.market_cap.usd)}`;
            
            // Atualizar volume 24h
            elements.volume24h.textContent = `$${formatLargeNumber(marketData.total_volume.usd)}`;
            
            // Atualizar variação de preço 24h
            const change24h = marketData.price_change_percentage_24h;
            elements.change24h.textContent = `${change24h >= 0 ? '+' : ''}${formatNumber(change24h)}%`;
            elements.change24h.className = change24h >= 0 ? 'positive' : 'negative';
        }
        
        // Iniciar o aplicativo quando a página estiver carregada
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>


